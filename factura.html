<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Facturas</title>
</head>
<body>
    <h1>Gestión de Facturas</h1>

    <form id="facturaForm">
        <label for="numeroFactura">Número de Factura:</label>
        <input type="text" id="numeroFactura" required>

        <label for="costeFactura">Coste de Factura:</label>
        <input type="text" id="costeFactura" required>

        <button type="button" onclick="agregarFactura()">Agregar Factura</button>
    </form>

    <h2>Listado de Facturas</h2>
    <table id="facturaTable">
        <thead>
            <tr>
                <th>Número de Factura</th>
                <th>Coste de Factura</th>
                <th>Pagar</th>
            </tr>
        </thead>
        <tbody id="facturaBody">
            <!-- Aquí se mostrarán las facturas ingresadas -->
        </tbody>
    </table>

    <div id="resumen">
        <h2>Resumen</h2>
        <p>Cantidad de Facturas Ingresadas: <span id="totalFacturas">0</span></p>
        <p>Cantidad Cobrada: <span id="totalCobrado">0</span></p>
        <p>Cantidad Pendiente de Cobro: <span id="totalPendiente">0</span></p>
    </div>

    <script>
        const facturas = {};

        function agregarFactura() {
            const numeroFactura = document.getElementById('numeroFactura').value;
            const costeFactura = parseFloat(document.getElementById('costeFactura').value);

            facturas[numeroFactura] = costeFactura;

            mostrarFacturas();
            mostrarResumen();
        }

        function pagarFactura(numeroFactura) {
            const costePagado = facturas[numeroFactura];
            delete facturas[numeroFactura];

            mostrarFacturas();
            mostrarResumen(costePagado);
        }

        function mostrarFacturas() {
            const facturaBody = document.getElementById('facturaBody');
            facturaBody.innerHTML = '';

            for (const numeroFactura in facturas) {
                const row = facturaBody.insertRow();
                row.insertCell(0).textContent = numeroFactura;
                row.insertCell(1).textContent = facturas[numeroFactura];
                
                const pagarButton = document.createElement('button');
                pagarButton.textContent = 'Pagar';
                pagarButton.onclick = function() {
                    pagarFactura(numeroFactura);
                };

                const cell = row.insertCell(2);
                cell.appendChild(pagarButton);
            }
        }

        function mostrarResumen(costePagado = 0) {
            const totalFacturas = Object.keys(facturas).length;
            const totalCobrado = parseFloat(document.getElementById('totalCobrado').textContent) + costePagado;
            const totalPendiente = Object.values(facturas).reduce((acc, curr) => acc + curr, 0);

            document.getElementById('totalFacturas').textContent = totalFacturas;
            document.getElementById('totalCobrado').textContent = totalCobrado;
            document.getElementById('totalPendiente').textContent = totalPendiente;
        }
    </script>
</body>
</html>
